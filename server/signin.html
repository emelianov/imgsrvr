<html>
	<head>
        <link rel="stylesheet" type="text/css" href="css/global.css" />
        <script src='https://www.google.com/recaptcha/api.js?render={{.CaptchaPub}}' defer async></script>
        <title>Imagen Dot Click: Sign In</title>
    </head>
    <body>
        <div id="container">
            <div id="header">
                <h1>Sign In</h1><br>
            </div>

            <form action="%sloginhandler/" method="post" id="form">
                Username: <input type="text" name="user"><br>
                Key: <input type="password" name="fn"><br>
                <div id=captcha>
                        <input type="hidden" id="g-recaptcha-response" name="g-recaptcha-response">
                        <input type="hidden" name="action" value="homepage">
                </div>
                <div id="status"></div>
                <script type="text/javascript">
                    document.write(qs("issue"));
                </script>
                <div id="submit">
                        <button class="g-recaptcha" data-sitekey="{{.CaptchaPub}}" id="submit"
            data-callback="document.getElementById('form').submit()" data-badge="inline" type="submit">
           Go!</button>
                </div>
                </form>
            </div>

            <div id="footer"><footer> <a href="{{.URLPrefix}}"> Home Page </a>&nbsp;&nbsp;  <a href="login"> Log In </a></footer></div>
        </div>  

        <script>
                grecaptcha.ready(function() {
                // do request for recaptcha token
                // response is promise with passed token
                    grecaptcha.execute('{{.CaptchaPub}}', {action:'homepage'})
                              .then(function(token) {
                        // add token value to form
                        document.getElementById('g-recaptcha-response').value = token;
                    });
                });
            </script>

        </body>
</html>
