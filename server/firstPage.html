<html>


<head>
<meta name="google-site-verification" content="2QLKtDFPPQwFab4Tx2Gf0TJ1SVMI1lSA4VfKsA90SaY" /> <!-- ssshhh... -->
<title>Imagen Dot Click</title>
<link rel="stylesheet" type="text/css" href="css/global.css" />
<script src='https://www.google.com/recaptcha/api.js' async defer></script>
<meta name="msvalidate.01" content="864046E07A1B992B74A4682F7D3CCD7E" />
</head>
<div id="container">
<body>
<div id="header">
    <h1>IMAGEN.CLICK</h1>
<h4> <a href="https://github.com/gidoBOSSftw5731/imgsrvr/"> See the code! </h4></a>
</div>
<div id="form">
    
<form enctype="multipart/form-data" action="{{.URLPrefix}}upload/" method="post" id="uploadform">
    <div id="loggedout">
    To save your Sign-In info, go to <a href="/login">the login page below!</a> <br>
    Username: <input type="text" name="user"><br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key: <input type="password" name="fn"><br>
    </div>
	<label for="upload" class="upload">
    IMG: <input type="file"  id="upload" name="uploadfile"><br>
    </label>

    <div id="status"></div>
	<div id="submit">
        <div id="submit">
            <button class="g-recaptcha" data-sitekey="{{.CaptchaPub}}" data-callback='onSubmit'>Go!</button>
        </div>   
        </div>
    </form>
</div>
    
<div id="footer">
        <a href="{{.URLPrefix}}"> Home Page </a>&nbsp;&nbsp;  <a id='loggedout' href="/login"> Log In </a>&nbsp;&nbsp;  <a id='loggedin' href="/logout"> LogOut </a>&nbsp;&nbsp;<a href="directory"> Directory </a>
</div>


<script>
    function onSubmit(token) {
      document.getElementById("uploadform").submit();
    }
  </script>

<script>
        var sessval = httpGet( "/verifysession" );
    
        if (sessval.includes("true") ) {
            hide(document.querySelectorAll('#loggedout'));
            //show(documents.querySelectorAll('#loggedin'));
        } else {
            hide(document.querySelectorAll('#loggedin'));
        }
    
        function httpGet(theUrl)
        {
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
            xmlHttp.send( null );
            return xmlHttp.responseText;
        }
    
        function hide (elements) {
            elements = elements.length ? elements : [elements];
            for (var index = 0; index < elements.length; index++) {
                elements[index].style.display = 'none';
            }
        }
    
      function show (elements, specifiedDisplay) {
        elements = elements.length ? elements : [elements];
        for (var index = 0; index < elements.length; index++) {
            elements[index].style.display = specifiedDisplay || 'block';
        }
    }
    </script>

</body>
</div>
</html>
